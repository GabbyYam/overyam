<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Overyam
  
</title>

<meta name="description" content="On Your Mark">
<meta property="og:type" content="website">
<meta property="og:title" content="Overyam">
<meta property="og:url" content="https://gabbyyam.github.io/overyam/page/7/index.html">
<meta property="og:site_name" content="Overyam">
<meta property="og:description" content="On Your Mark">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="GabbyYam">
<meta name="twitter:card" content="summary">


  <link rel="alternative" href="/atom.xml" title="Overyam" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">



<link rel="stylesheet" href="/overyam/perfect-scrollbar/css/perfect-scrollbar.min.css">


<link rel="stylesheet" href="/overyam/styles/main.css">







<meta name="generator" content="Hexo 4.2.0"></head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/overyam/">Overyam</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/overyam/">Overyam</a></h1>
    
    <div class="info">
      <div class="content">
        
          <div class="description">On Your Mark</div>
        
        
          <div class="author">GabbyYam</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://cn.gravatar.com/avatar/35fef74d731255cd569c2c2b0b9e87e4?s=200"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">Tag</a>
                
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">Archive</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/overyam/archives/2020/">2020</a><span class="archive-list-count">44</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/overyam/" title="Homepage" external="false">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/overyam/archives" title="By Year" external="false">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/denjones/hexo-theme-chan" title="Chan" target="_blank" rel="noopener">Chan</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/denjones" title="Github" target="_blank" rel="noopener">Github</a>
              </li>
            
          
            
              <li>
                <a href="/overyam/atom.xml" title="RSS" external="false">RSS</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/overyam/2020/02/25/Concurrent%20programming/synchronized/" >
  Concurrent programming/synchronized
</a>

      </h3>
      

      <div class="article-info">
        <a href="/overyam/2020/02/25/Concurrent%20programming/synchronized/"><span class="article-date">
  2020-02-25
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <p>[TOC]</p>
<h1 id="synchronizedä¸¤ä¸ªåŸºæœ¬ç”¨æ³•">synchronizedä¸¤ä¸ªåŸºæœ¬ç”¨æ³•</h1>
<ul>
<li>
<p>åŒæ­¥æ–¹æ³•ï¼šå¯¹äºåŒæ­¥æ–¹æ³•ï¼ŒJVMé‡‡ç”¨çš„æ˜¯ ACC_SYNCHRONIZED æ ‡è®°ç¬¦æ¥å®ç°åŒæ­¥</p>
<blockquote>
<p>Method-level synchronization is performed implicitly, as part of method invocation and return (<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.11.8" target="_blank" rel="noopener">Â§2.11.8</a>). A <code>synchronized</code> method is distinguished in the run-time constant poolâ€™s <code>method_info</code> structure (<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6" target="_blank" rel="noopener">Â§4.6</a>) by the <code>ACC_SYNCHRONIZED</code> flag, which is checked by the method invocation instructions. When invoking a method for which <code>ACC_SYNCHRONIZED</code> is set, the executing thread enters a monitor, invokes the method itself, and exits the monitor whether the method invocation completes normally or abruptly. During the time the executing thread owns the monitor, no other thread may enter it. If an exception is thrown during invocation of the <code>synchronized</code> method and the <code>synchronized</code> method does not handle the exception, the monitor for the method is automatically exited before the exception is rethrown out of the <code>synchronized</code> method.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">doSth</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">descriptor:</span> <span class="string">()V</span></span><br><span class="line"><span class="attr">flags:</span> <span class="string">ACC_PUBLIC,</span> <span class="string">ACC_SYNCHRONIZED</span></span><br><span class="line"><span class="attr">Code:</span></span><br><span class="line"><span class="string">stack=2,</span> <span class="string">locals=1,</span> <span class="string">args_size=1</span></span><br><span class="line"><span class="attr">0:</span> <span class="string">getstatic</span>     <span class="comment">#2    // Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line"><span class="attr">3:</span> <span class="string">ldc</span>           <span class="comment">#3    // String Hello World</span></span><br><span class="line"><span class="attr">5:</span> <span class="string">invokevirtual</span> <span class="comment">#4    // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line"><span class="attr">8:</span> <span class="string">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹æ³•çº§åˆ«ä¸‹çš„åŒæ­¥æ˜¯éšå¼è¿›è¡Œçš„ï¼ŒåŒæ­¥æ–¹æ³•çš„å¸¸é‡æ± ä¸­ä¼šæœ‰ä¸€ä¸ªACC_SYNCHRONIZEDæ ‡å¿—ã€‚å½“æŸä¸ªçº¿ç¨‹è¦è®¿é—®æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥æ˜¯å¦æœ‰ACC_SYNCHRONIZEDï¼Œå¦‚æœæœ‰è®¾ç½®ï¼Œåˆ™éœ€è¦å…ˆè·å¾—ç›‘è§†å™¨é”ï¼Œç„¶åå¼€å§‹æ‰§è¡Œæ–¹æ³•ï¼Œæ–¹æ³•æ‰§è¡Œä¹‹åå†é‡Šæ”¾ç›‘è§†å™¨é”ã€‚è¿™æ—¶å¦‚æœå…¶ä»–çº¿ç¨‹æ¥è¯·æ±‚æ‰§è¡Œæ–¹æ³•ï¼Œä¼šå› ä¸ºæ— æ³•è·å¾—ç›‘è§†å™¨é”è€Œè¢«é˜»æ–­ä½ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿäº†å¼‚å¸¸ï¼Œå¹¶ä¸”æ–¹æ³•å†…éƒ¨å¹¶æ²¡æœ‰å¤„ç†è¯¥å¼‚å¸¸ï¼Œé‚£ä¹ˆåœ¨å¼‚å¸¸è¢«æŠ›åˆ°æ–¹æ³•å¤–é¢ä¹‹å‰ç›‘è§†å™¨é”ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŒæ­¥ä»£ç å—ï¼šå¯¹äºä»£ç å—ï¼ŒJVMé‡‡ç”¨ monitorenterå’Œmonitorexitæ¥å®ç°</p>
<blockquote>
<p>Synchronization in the Java Virtual Machine is implemented by monitor entry and exit, either explicitly (by use of the <em>monitorenter</em> and <em>monitorexit</em> instructions) or implicitly (by the method invocation and return instructions).</p>
<p>The <em>monitorenter</em> and <em>monitorexit</em> instructions enable the compilation of <code>synchronized</code> statements.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSth1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (SynchronizedTest<span class="class">.<span class="keyword">class</span>)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">descriptor:</span> <span class="string">()V</span></span><br><span class="line"><span class="attr">flags:</span> <span class="string">ACC_PUBLIC</span></span><br><span class="line"><span class="attr">Code:</span></span><br><span class="line"><span class="string">stack=2,</span> <span class="string">locals=3,</span> <span class="string">args_size=1</span></span><br><span class="line"><span class="attr">0:</span> <span class="string">ldc</span>           <span class="comment">#5   // class com/hollis/SynchronizedTest</span></span><br><span class="line"><span class="attr">2:</span> <span class="string">dup</span></span><br><span class="line"><span class="attr">3:</span> <span class="string">astore_1</span></span><br><span class="line"><span class="attr">4:</span> <span class="string">monitorenter</span></span><br><span class="line"><span class="attr">5:</span> <span class="string">getstatic</span>     <span class="comment">#2    // Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line"><span class="attr">8:</span> <span class="string">ldc</span>           <span class="comment">#3    // String Hello World</span></span><br><span class="line"><span class="attr">10:</span> <span class="string">invokevirtual</span> <span class="comment">#4   //Methodjava/io/PrintStream.println(Ljava/lang/String;)V</span></span><br><span class="line"><span class="attr">13:</span> <span class="string">aload_1</span></span><br><span class="line"><span class="attr">14:</span> <span class="string">monitorexit</span></span><br><span class="line"><span class="attr">15:</span> <span class="string">goto</span>          <span class="number">23</span></span><br><span class="line"><span class="attr">18:</span> <span class="string">astore_2</span></span><br><span class="line"><span class="attr">19:</span> <span class="string">aload_1</span></span><br><span class="line"><span class="attr">20:</span> <span class="string">monitorexit</span></span><br><span class="line"><span class="attr">21:</span> <span class="string">aload_2</span></span><br><span class="line"><span class="attr">22:</span> <span class="string">athrow</span></span><br><span class="line"><span class="attr">23:</span> <span class="string">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤§è‡´å†…å®¹å¦‚ä¸‹ï¼š å¯ä»¥æŠŠæ‰§è¡ŒmonitorenteræŒ‡ä»¤ç†è§£ä¸ºåŠ é”ï¼Œæ‰§è¡Œmonitorexitç†è§£ä¸ºé‡Šæ”¾é”ã€‚ æ¯ä¸ªå¯¹è±¡ç»´æŠ¤ç€ä¸€ä¸ªè®°å½•ç€è¢«é”æ¬¡æ•°çš„è®¡æ•°å™¨ã€‚æœªè¢«é”å®šçš„å¯¹è±¡çš„è¯¥è®¡æ•°å™¨ä¸º0ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ï¼ˆæ‰§è¡Œmonitorenterï¼‰åï¼Œè¯¥è®¡æ•°å™¨è‡ªå¢å˜ä¸º 1 ï¼Œå½“åŒä¸€ä¸ªçº¿ç¨‹å†æ¬¡è·å¾—è¯¥å¯¹è±¡çš„é”çš„æ—¶å€™ï¼Œè®¡æ•°å™¨å†æ¬¡è‡ªå¢ã€‚å½“åŒä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”ï¼ˆæ‰§è¡ŒmonitorexitæŒ‡ä»¤ï¼‰çš„æ—¶å€™ï¼Œè®¡æ•°å™¨å†è‡ªå‡ã€‚å½“è®¡æ•°å™¨ä¸º0çš„æ—¶å€™ã€‚é”å°†è¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹ä¾¿å¯ä»¥è·å¾—é”ã€‚</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="synchronizedçš„é”æœºåˆ¶">synchronizedçš„é”æœºåˆ¶</h1>
<p>synchronizedåœ¨jdk1.6ä»¥å‰åªæœ‰ä¼ ç»Ÿçš„é”æœºåˆ¶ï¼Œå±äº==<strong>é‡é‡çº§é”</strong>==ï¼Œæ˜¾ç„¶æ€§èƒ½æ˜¯ä¸æ€ä¹ˆå¥½çš„</p>
<p>ç„¶è€Œåœ¨<mark>jdk1.6å¼•å…¥ä¸¤ç§æ–°çš„é”æœºåˆ¶ï¼šè½»é‡çº§é”å’Œåå‘é”</mark>ï¼Œä¸¤è€…çš„å¼•å…¥æ˜¯ä¸ºäº†è§£å†³æ²¡æœ‰æˆ–å‡ ä¹æ²¡æœ‰çº¿ç¨‹ç«äº‰æ—¶é‡é‡çº§é”èµ„æºæ¶ˆè€—é—®é¢˜</p>
<p>è€ƒè™‘é”æœºåˆ¶çš„å®ç°ä¹‹å‰ï¼Œå…ˆè°ˆè°ˆå¯¹è±¡å¤´</p>
<h2 id="å¯¹è±¡å¤´">å¯¹è±¡å¤´</h2>
<ul>
<li>
<p>JVMä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­é™¤äº†è‡ªèº«çš„ä¿¡æ¯å¤–è¿˜å­˜æœ‰ä¸€ä¸ªå¯¹è±¡å¤´ï¼Œä¿å­˜äº†ä¸€äº›hashcodeã€GCç›¸å…³ä»¥åŠé”ç›¸å…³çš„æ•°æ®</p>
</li>
<li>
<p>å¯¹è±¡å¤´ä¸­å­˜æœ‰ä¸¤ç±»ä¿¡æ¯ï¼šä¸€æ˜¯mark wordï¼ŒäºŒæ˜¯ç±»å‹æŒ‡é’ˆ</p>
<ul>
<li>
<p>ç±»å‹æŒ‡é’ˆæŒ‡å‘è¯¥ç±»æ‰€å±çš„ç±»å¯¹è±¡</p>
</li>
<li>
<p>markwordç”¨äºå­˜å‚¨hashcodeã€GCç›¸å…³ä»£ä¿¡æ¯ä»¥åŠé”ç›¸å…³çš„ä¿¡æ¯ï¼Œmarkwordçš„é•¿åº¦å–å†³äºæ“ä½œç³»ç»Ÿçš„ä½æ•°,ä»¥ä¸‹æ˜¯ä¸€ä¸ª32ä½ç³»ç»Ÿä¸‹markwordå„çŠ¶æ€çš„æ ¼å¼<img src="diagram/16759dd1b0b96268" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¤„äºä¸åŒé”æ€çš„å¯¹è±¡ï¼Œmarkwordçš„å†…å®¹ä¹Ÿä¸ä¸€æ ·</p>
</li>
</ul>
</li>
</ul>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/overyam/2020/02/25/Concurrent%20programming/AQS/" >
  Concurrent programming/AQS
</a>

      </h3>
      

      <div class="article-info">
        <a href="/overyam/2020/02/25/Concurrent%20programming/AQS/"><span class="article-date">
  2020-02-25
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <p>[TOC]</p>
<h1 id="åŸç†æ¦‚è§ˆ">åŸç†æ¦‚è§ˆ</h1>
<ul>
<li>
<p><code>AQS</code>ï¼Œå…¨ç§°<code>AbstractQueueSynchronizer</code>ï¼Œæ˜¯ç”¨äºç»´æŠ¤çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—çš„æ•°æ®ç»“æ„</p>
</li>
<li>
<p><code>AQS</code>ä¸­çš„é˜Ÿåˆ—æ˜¯<code>FIFO</code>çš„<strong>åŒå‘é˜Ÿåˆ—</strong></p>
</li>
<li>
<p><code>AQS</code>ä¸­çš„èŠ‚ç‚¹å‡ä¸º<code>volatile</code>ä¿®é¥°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">volatile</span> <span class="keyword">int</span> waitStatus;	<span class="comment">//ç­‰å¾…çŠ¶æ€</span></span><br><span class="line"><span class="keyword">volatile</span> Node prev;         <span class="comment">//å‰é©±èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">volatile</span> Node next;			<span class="comment">//åç»§èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">volatile</span> Thread thread;		<span class="comment">//ä»£è¡¨çš„çº¿ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> state; <span class="comment">//åŒæ­¥çŠ¶æ€ï¼Œå³é”çš„ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å®ç°<mark>è‡ªå®šä¹‰åŒæ­¥å™¨</mark>éœ€è¦å®ç°çš„ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li>çº¯ç‹¬å æ¨¡å¼ï¼š<code>ReentrantLock</code></li>
<li>åŒæ¨¡å¼ï¼š<code>ReentrantWriteReadLock</code></li>
<li>å…¶ä¸­<code>acquire</code>å’Œ<code>release</code>ç»§æ‰¿äºAQSï¼Œä¸éœ€è¦é‡å†™ï¼Œç”¨äºç®¡ç†ä½äºåŒå‘é˜Ÿåˆ—ä¸­çš„å„èŠ‚ç‚¹</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å–å¾—é”</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isHeldExclusively</span><span class="params">()</span>    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//ç‹¬å æ¨¡å¼</span></span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryAcquire</span><span class="params">(<span class="keyword">int</span> arg)</span>	<span class="comment">//ç”¨äºAQSä¸­çš„acquireæ–¹æ³•ï¼Œå°è¯•è·å–èµ„æºï¼Œå¹¶è®¾ç½®çŠ¶æ€</span></span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryRelease</span><span class="params">(<span class="keyword">int</span> arg)</span>	<span class="comment">//ç”¨äºAQSä¸­çš„releaseæ–¹æ³•ï¼Œå°è¯•é‡Šæ”¾èµ„æº,å¹¶è®¾ç½®çŠ¶æ€</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//å…±äº«æ¨¡å¼</span></span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> arg)</span>	</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryReleaseShared</span><span class="params">(<span class="keyword">int</span> arg)</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/overyam/2020/02/25/Compiler/Stanford-Note/lexical%20analysis/" >
  Compiler/Stanford-Note/lexical analysis
</a>

      </h3>
      

      <div class="article-info">
        <a href="/overyam/2020/02/25/Compiler/Stanford-Note/lexical%20analysis/"><span class="article-date">
  2020-02-25
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <h1 id="Lexical-Analysisï¼ˆè¯æ³•åˆ†æï¼‰">Lexical Analysisï¼ˆè¯æ³•åˆ†æï¼‰</h1>
<p><strong>ä¸»è¦ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>
<p><strong>å°†ä¸€æ®µprogramåˆ†å‰²æˆä¸åŒçš„æˆåˆ†</strong></p>
</li>
<li>
<p><strong>å¹¶æ ‡è®°å¯¹åº”çš„tokenï¼ˆå³è¯æ€§ï¼šé€»è¾‘è¿ç®—ç¬¦ã€è¿ç®—ç¬¦ã€å˜é‡åã€å…³é”®å­—ã€etcï¼‰</strong></p>
</li>
</ul>
<p>tokençš„å½¢å¼ï¼š&lt;class,string&gt;,for example:</p>
<ul>
<li>&lt;Id,â€œfooâ€&gt;</li>
<li>&lt;op,&quot;=&quot;&gt;</li>
<li>&lt;Int,â€œ42â€&gt;</li>
<li>â€¦</li>
</ul>
<p>æ ‡ç‚¹ç¬¦å·æ²¡æœ‰tokenï¼Œè€Œæ˜¯ç”¨è‡ªå·±æœ¬èº«è¡¨ç¤ºï¼Œæ¯”å¦‚</p>
<ul>
<li>â€œ:â€</li>
<li>â€œ(â€</li>
<li>â€œ;â€</li>
</ul>
<p>æ­£åˆ™è¯­è¨€-regular languageï¼š</p>
<p>äº¤é›†ï¼ˆxï¼‰ã€å¹¶é›†ï¼ˆ+ï¼‰ã€åå¤ï¼ˆ*ï¼‰</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/overyam/2020/02/25/Compiler/Mooc-Note/Note-01-%E6%A6%82%E8%BF%B0/" >
  Compiler/Mooc-Note/Note-01-æ¦‚è¿°
</a>

      </h3>
      

      <div class="article-info">
        <a href="/overyam/2020/02/25/Compiler/Mooc-Note/Note-01-%E6%A6%82%E8%BF%B0/"><span class="article-date">
  2020-02-25
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <h1 id="æ¦‚è¿°">æ¦‚è¿°</h1>
<p>é«˜çº§è¯­è¨€è¯­è¨€ ï¼ˆç¼–è¯‘ï¼‰=&gt; æ±‡ç¼–è¯­è¨€ ï¼ˆæ±‡ç¼–ï¼‰=&gt; æœºå™¨è¯­è¨€</p>
<p><strong>ç»“æ„ï¼šç±»ä¼¼äºè¯­è¨€ç¿»è¯‘</strong></p>
<ul>
<li>åˆ†æéƒ¨åˆ†ï¼šåˆ†ææºè¯­è¨€</li>
<li>ä¼˜åŒ–å™¨</li>
<li>ç»¼åˆéƒ¨åˆ†ï¼šç»„ç»‡ç›®æ ‡è¯­è¨€</li>
</ul>
<p>**è¯æ³•åˆ†æï¼š**è¯†åˆ«å„ä¸ªå•è¯ï¼Œåˆ¤æ–­è¯¥è¯çš„category</p>
<ul>
<li>è¯æ³•å•å…ƒä»¥tokençš„å½¢å¼å‘ˆç° &lt;Kind,Type&gt;</li>
<li>å…³é”®è¯(key word)</li>
<li>å¸¸é‡</li>
<li>è¿ç®—ç¬¦ =-+*</li>
<li>ç•Œé™ç¬¦ ğŸ˜¦{[])</li>
<li>æ ‡è¯†ç¬¦ï¼šå˜é‡åã€æ–¹æ³•åã€ç±»åã€etc</li>
</ul>
<p><strong>è¯­å¥é€šè¿‡åˆ†ææ ‘æ¥è¿›è¡Œåˆ†æ</strong></p>
<p><strong>è¯­ä¹‰åˆ†æï¼š</strong></p>
<ul>
<li>æ”¶é›†æ ‡è¯†ç¬¦çš„å±æ€§ä¿¡æ¯
<ul>
<li>Kind</li>
<li>Type</li>
<li>å‚¨å­˜ä½ç½®ã€ä½ç½®</li>
<li>å€¼</li>
<li>ä½œç”¨åŸŸ</li>
<li>å‚æ•°å’Œè¿”å›ä¿¡æ¯</li>
</ul>
</li>
<li>è¯­ä¹‰æ£€æŸ¥</li>
</ul>
<p><strong>ä¸­é—´ä»£ç ç”Ÿæˆï¼šå³ä»£ç ç¿»è¯‘çš„ä¸­é—´å½¢å¼</strong></p>
<ul>
<li>ä¸‰åœ°å€æŒ‡ä»¤ï¼ˆæ“ä½œç¬¦ï¼Œæ“ä½œæ•°ï¼Œè¢«æ“ä½œæ•°ï¼Œèµ‹å€¼æ•°ï¼‰</li>
</ul>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/overyam/2020/02/25/Algorithm/Leetcode/Tree-Medium/" >
  Algorithm/Leetcode/Tree-Medium
</a>

      </h3>
      

      <div class="article-info">
        <a href="/overyam/2020/02/25/Algorithm/Leetcode/Tree-Medium/"><span class="article-date">
  2020-02-25
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <p>[TOC]</p>
<h1 id="94-Binary-Tree-Inorder-Traversal"><a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/" target="_blank" rel="noopener">94. Binary Tree Inorder Traversal</a></h1>
<p><img src="diagram/image-20200211153052914.png" alt="image-20200211153052914"></p>
<h2 id="è§£æ³•ä¸€ï¼šé€’å½’æ³•">è§£æ³•ä¸€ï¼šé€’å½’æ³•</h2>
<p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸ä¼šç æ‰‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; inorder=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        inorder=inorderTraversal(root.left);</span><br><span class="line">        inorder.add(root.val);</span><br><span class="line">        inorder=inorderTraversal(root.right);&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> inorder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•äºŒï¼šè¿­ä»£æ³•">è§£æ³•äºŒï¼šè¿­ä»£æ³•</h2>
<p>æ¯”é€’å½’æ³•éš¾ç†è§£ä¸€äº›ï¼Œé‡ç‚¹æ˜¯ç†è§£å¥½å¦‚ä½•å›æº¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; inorder=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    Stack&lt;TreeNode&gt; stack=<span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        TreeNode curr=root; <span class="comment">//è¾…åŠ©æ¥ç‚¹currï¼ŒæŒ‡å‘å½“å‰è®¿é—®çš„TreeNode</span></span><br><span class="line">        <span class="keyword">while</span>(curr!=<span class="keyword">null</span> || !stack.isEmpty())&#123; <span class="comment">//å½“å‰è®¿é—®çš„èŠ‚ç‚¹ä¸ä¸ºç©ºæˆ–æ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜è¿˜æ²¡éå†å®Œ</span></span><br><span class="line">            <span class="keyword">while</span>(curr!=<span class="keyword">null</span>)&#123; <span class="comment">//ä¸æ–­å‹å…¥å·¦èŠ‚ç‚¹</span></span><br><span class="line">                stack.push(curr);</span><br><span class="line">                curr=curr.left;</span><br><span class="line">            &#125;</span><br><span class="line">            curr=stack.pop(); <span class="comment">//**å›æº¯**</span></span><br><span class="line">            inorder.add(curr.val); <span class="comment">//å°†å½“å‰è®¿é—®çš„èŠ‚ç‚¹åŠ å…¥</span></span><br><span class="line">            curr=curr.right; <span class="comment">//å¦‚æœæœ‰å³èŠ‚ç‚¹åˆ™è®¿é—®å³èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰å°†åœ¨ä¸‹ä¸€è½®å›æº¯æˆ–è€…ç»“æŸ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> inorder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•ä¸‰ï¼š-è«æ¯”æ–¯éå†">è§£æ³•ä¸‰ï¼š è«æ¯”æ–¯éå†</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="96-Unique-Binary-Search-Trees"><a href="https://leetcode-cn.com/problems/unique-binary-search-trees/" target="_blank" rel="noopener">96. Unique Binary Search Trees</a></h1>
<p><img src="diagram/image-20200211165519568.png" alt="image-20200211165519568"></p>
<h2 id="è§£æ³•ä¸€ï¼šé€’å½’æ³•-v2">è§£æ³•ä¸€ï¼šé€’å½’æ³•</h2>
<ul>
<li>
<p>**æ€è·¯ï¼š**åˆ†åˆ«ä»¥1-nçš„ä»»æ„æ•´æ•°ä¸ºæ ¹ï¼Œé‚£ä¹ˆå·¦å³å­æ ‘æœ‰å“ªäº›å€¼æ˜¯å¯ä»¥ç¡®å®šçš„ï¼Œå› æ­¤å¯ä»¥é€’å½’åœ°æ¥åš</p>
</li>
<li>
<p><strong>è¦ç‚¹ï¼š</strong>{4,5,6,7,8}åœ¨æ­¤å¤„å¯ä»¥ç­‰ä»·äº{1,2,3,4,5}ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé€’å½’</p>
</li>
<li>
<p>**ç¼ºç‚¹ï¼š**æ²¡æœ‰ä¿å­˜é€’å½’ç»“æœï¼Œå¢åŠ äº†è®¸å¤šé‡å¤çš„æ“ä½œï¼Œä¸‹ä¸€ä¸ªè§£æ³•è€ƒè™‘å¯¹ç»“æœè¿›è¡Œç¼“å­˜</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numTrees</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;=<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>; <span class="comment">//ç‰¹æ®Šæƒ…å†µï¼Œä»¥åŠé€’å½’çš„åŸºå‡†</span></span><br><span class="line">        <span class="keyword">int</span> uniqueNum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;uniqueNum+=numTrees(i-<span class="number">1</span>)*numTrees(n-i);&#125; <span class="comment">//é€’å½’å·¦å³åŒºé—´çš„ä¹˜ç§¯</span></span><br><span class="line">        <span class="keyword">return</span> uniqueNum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•äºŒï¼šè®°å¿†åŒ–é€’å½’">è§£æ³•äºŒï¼šè®°å¿†åŒ–é€’å½’</h2>
<p>ç›´æ¥é€’å½’çš„ç¼ºç‚¹æ˜¯é‡å¤é€’å½’å¾ˆå¤šåœ°æ–¹ï¼Œæ‰€ä»¥éœ€è¦å‰ªæ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numTrees</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> dynamicNumTrees(n,dp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dynamicNumTrees</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span>[] dp)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;=<span class="number">1</span>)&#123;<span class="keyword">return</span> <span class="number">1</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(dp[n]!=<span class="number">0</span>)&#123;<span class="keyword">return</span> dp[n];&#125; <span class="comment">//åŠ å…¥DPç¼“å­˜</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;dp[n]+=dynamicNumTrees(i-<span class="number">1</span>,dp)*dynamicNumTrees(n-i,dp);&#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="95-Unique-Binary-Search-Trees-II"><a href="https://leetcode-cn.com/problems/unique-binary-search-trees-ii/" target="_blank" rel="noopener">95. Unique Binary Search Trees II</a></h1>
<p><img src="diagram/image-20200211195518011.png" alt="image-20200211195518011"></p>
<h2 id="è§£æ³•ä¸€ï¼šé€’å½’æ³•-v3">è§£æ³•ä¸€ï¼šé€’å½’æ³•</h2>
<p>å’Œä¸Šé¢˜ç±»ä¼¼çš„é€’å½’æ€è·¯ï¼Œä¸è¿‡æ³¨æ„<mark>rootçš„åˆ›å»ºæ—¶æœº</mark></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">generateTrees</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">return</span> <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;(); <span class="comment">//ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">        <span class="keyword">return</span> generate(<span class="number">1</span>,n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">generate</span><span class="params">(<span class="keyword">int</span> lo,<span class="keyword">int</span> hi)</span></span>&#123;</span><br><span class="line">        List&lt;TreeNode&gt; BSTs=<span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();     <span class="comment">//æ³¨æ„ArrayListä¸èƒ½åŠ å…¥null</span></span><br><span class="line">        <span class="keyword">if</span>(lo&gt;hi)&#123;BSTs.add(<span class="keyword">null</span>);<span class="keyword">return</span> BSTs;&#125;              <span class="comment">//åŠ å…¥null</span></span><br><span class="line">        <span class="keyword">if</span>(lo==hi)&#123;BSTs.add(<span class="keyword">new</span> TreeNode(lo));<span class="keyword">return</span> BSTs;&#125; <span class="comment">//é€’å½’åŸºå‡†</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=lo;i&lt;=hi;i++)&#123;</span><br><span class="line">            List&lt;TreeNode&gt; leftList=generate(lo,i-<span class="number">1</span>);</span><br><span class="line">            List&lt;TreeNode&gt; rightList=generate(i+<span class="number">1</span>,hi); <span class="comment">//åˆ†åˆ«å–å¾—å·¦å³å­æ ‘çš„é€’å½’ç»“æœ</span></span><br><span class="line">            <span class="keyword">for</span>(TreeNode leftRoot:leftList)&#123;</span><br><span class="line">                <span class="keyword">for</span>(TreeNode rightRoot:rightList)&#123;    </span><br><span class="line">                    TreeNode root=<span class="keyword">new</span> TreeNode(i);<span class="comment">//rootåº”è¯¥åœ¨å¾ªç¯ä½“å†…newï¼Œå¦åˆ™ä¼šå’Œä¸Šä¸€è½®çš„æ··æ·†</span></span><br><span class="line">                    root.left=leftRoot;</span><br><span class="line">                    root.right=rightRoot;</span><br><span class="line">                    BSTs.add(root);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> BSTs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•äºŒï¼šè®°å¿†åŒ–é€’å½’-v2">è§£æ³•äºŒï¼šè®°å¿†åŒ–é€’å½’</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="105-Construct-Binary-Tree-from-Preorder-and-Inorder-Traversal"><a href="https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/" target="_blank" rel="noopener">105. Construct Binary Tree from Preorder and Inorder Traversal</a></h1>
<p><img src="diagram/image-20200211234824881.png" alt=""></p>
<h2 id="è§£æ³•ä¸€ï¼šé€’å½’æ³•-v4">è§£æ³•ä¸€ï¼šé€’å½’æ³•</h2>
<p>è¿™é¢˜çš„é‡ç‚¹æ˜¯å¦‚ä½•åˆ†åˆ«åœ¨inorderå’Œpreorderä¸­åˆ’åˆ†å·¦å³å­æ ‘</p>
<ul>
<li><strong>preorderçš„å¤´éƒ¨æ˜¯root</strong></li>
<li>**inorderå¦‚ä½•åˆ’åˆ†ï¼š**åœ¨inorderä¸­æ‰¾åˆ°rootï¼Œé‚£ä¹ˆåœ¨æ­¤ä¹‹å‰çš„ä¸ºleftï¼Œä¹‹åçš„ä¸ºright</li>
<li>**preorderå¦‚ä½•åˆ’åˆ†ï¼š**inorderä¸­ï¼Œleft-rootå³ä¸ºleftçš„é•¿åº¦leftSizeï¼Œç”±æ­¤æ¨å‡ºä»¥ä¸‹å…³ç³»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·¦å­æ ‘</span></span><br><span class="line">next_p_lo=p_lo+<span class="number">1</span>;</span><br><span class="line">next_p_hi=p_lo+leftSize;</span><br><span class="line">next_i_lo=i_lo;</span><br><span class="line">next_i_hi=i_lo+leftSize+<span class="number">1</span>;</span><br><span class="line"><span class="comment">//å³å­æ ‘</span></span><br><span class="line">next_p_lo=p_lo+leftSize+<span class="number">1</span>;</span><br><span class="line">next_p_hi=p_hi;</span><br><span class="line">next_i_lo=i_lo+leftSize+<span class="number">1</span>;</span><br><span class="line">next_i_hi=p_hi;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] preorder, <span class="keyword">int</span>[] inorder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len=preorder.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> build(preorder,inorder,<span class="number">0</span>,len,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">build</span><span class="params">(<span class="keyword">int</span>[] preorder,<span class="keyword">int</span>[] inorder,<span class="keyword">int</span> p_lo,<span class="keyword">int</span> p_hi,<span class="keyword">int</span> i_lo,<span class="keyword">int</span> i_hi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p_lo&gt;p_hi || i_lo&gt;i_hi)&#123;<span class="keyword">return</span> <span class="keyword">null</span>;&#125; <span class="comment">//è¶Šç•Œåˆ¤å®š &amp; é€’å½’ç»“æŸ</span></span><br><span class="line">        <span class="keyword">int</span> leftSize=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=i_lo;i&lt;=i_hi;i++)&#123; <span class="comment">//åœ¨inorderä¸­æ‰¾åˆ°rootå¹¶ç®—å‡ºleftSize</span></span><br><span class="line">            <span class="keyword">if</span>(inorder[i]==preorder[p_lo])&#123;leftSize=i-i_lo;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode root=<span class="keyword">new</span> TreeNode(preorder[p_lo]); <span class="comment">//ä¾æ®å·²æœ‰å…³ç³»ï¼Œæ„é€ æ ¹èŠ‚ç‚¹å’Œå·¦å³å­æ ‘</span></span><br><span class="line">        root.left=build(preorder,inorder,p_lo+<span class="number">1</span>,p_lo+leftSize,i_lo,i_lo+leftSize-<span class="number">1</span>);</span><br><span class="line">        root.right=build(preorder,inorder,p_lo+leftSize+<span class="number">1</span>,p_hi,i_lo+leftSize+<span class="number">1</span>,i_hi);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="98-Validate-Binary-Search-Tree"><a href="https://leetcode-cn.com/problems/validate-binary-search-tree/" target="_blank" rel="noopener">98. Validate Binary Search Tree</a></h1>
<p><img src="diagram/image-20200212032652708.png" alt="image-20200212032652708"></p>
<h2 id="è§£æ³•ä¸€ï¼šä¸­åºéå†">è§£æ³•ä¸€ï¼šä¸­åºéå†</h2>
<p>åˆ¤æ–­BSTï¼Œ<strong>å®¹æ˜“ç®€å•è®¤ä¸ºæ˜¯</strong>åªè¦å·¦å­æ ‘æ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå³å­æ ‘æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œä»¥æ­¤é€’å½’å°±è¡Œ</p>
<p>ä½†æ˜¯ï¼Œä¸Šè¿°ç­–ç•¥å¿½ç•¥äº†ä¸€ç‚¹ï¼š<mark>å·¦å­æ ‘&lt;å³å­æ ‘</mark></p>
<p>å› æ­¤å¿…é¡»ä¿è¯è¿™ä¸€ç‚¹ï¼Œè€ƒè™‘åˆ°<mark>BSTçš„ç‰¹æ€§ï¼šä¸­åºéå†</mark>ï¼Œå¾—å‡ºä»¥ä¸‹è§£æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; inorder=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidBST</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        inorder(root);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;inorder.size();i++)&#123; <span class="comment">//æ£€æŸ¥ä¸­åºéå†ç»“æœæ˜¯å¦é¡ºåºå³å¯</span></span><br><span class="line">            <span class="keyword">if</span>(inorder.get(i)&lt;=inorder.get(i-<span class="number">1</span>))<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inorder</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            inorder(root.left);</span><br><span class="line">            inorder.add(root.val);</span><br><span class="line">            inorder(root.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•äºŒï¼šè¿­ä»£æ³•-v2">è§£æ³•äºŒï¼šè¿­ä»£æ³•</h2>
<p>è¾¹è¿­ä»£è¾¹æ£€æŸ¥ï¼Œè¿˜å¯ä»¥å†™æˆé€’å½’æ³•ï¼Œä¸è¿‡åŒç†å°±ä¸å†™äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Stack&lt;TreeNode&gt; stack=<span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidBST</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        TreeNode curr=root;</span><br><span class="line">        Integer val=<span class="keyword">null</span>; <span class="comment">//æ³¨æ„è¿™é‡Œè¦ç”¨Integerè€Œä¸æ˜¯intï¼Œå› ä¸ºå¯ä»¥ç”¨null,ä¸ç„¶æ— è®ºè®¾æˆä»€ä¹ˆéƒ½èƒ½è¢«å¡æ‰</span></span><br><span class="line">        <span class="keyword">while</span>(curr!=<span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(curr!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(curr);</span><br><span class="line">                curr=curr.left;</span><br><span class="line">            &#125;</span><br><span class="line">            curr=stack.pop();</span><br><span class="line">            <span class="keyword">if</span>(val!=<span class="keyword">null</span> &amp;&amp; curr.val&lt;=val)&#123;<span class="keyword">return</span> <span class="keyword">false</span>;&#125; <span class="comment">//é”™è¯¯åˆ¤å®š</span></span><br><span class="line">            val=curr.val;</span><br><span class="line">            curr=curr.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      </div>
    </div>

  
    </div>
  



  <div class="pagination">
    <a class="extend prev" rel="prev" href="/overyam/page/6/">Prev</a><a class="page-number" href="/overyam/">1</a><span class="space">&hellip;</span><a class="page-number" href="/overyam/page/5/">5</a><a class="page-number" href="/overyam/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/overyam/page/8/">8</a><a class="page-number" href="/overyam/page/9/">9</a><a class="extend next" rel="next" href="/overyam/page/8/">Next</a>
  </div>




          <div class="main-footer">
  
    Â© 2020 Overyam - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  
<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


  
<link rel="stylesheet" href="/overyam/PhotoSwipe/photoswipe.css">

  
<link rel="stylesheet" href="/overyam/PhotoSwipe/default-skin/default-skin.css">


  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  
<script src="/overyam/PhotoSwipe/photoswipe.js"></script>

  
<script src="/overyam/PhotoSwipe/photoswipe-ui-default.js"></script>




<script src="/overyam/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>


<script src="/overyam/scripts/main.js"></script>


</body>
</html>
